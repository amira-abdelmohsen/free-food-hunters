{% extends "layout.html" %}

{% block content %}
<h2>Welcome, {{ user }} (Student)</h2>
<a href="{{ url_for('dashboard', role='organizer') }}" class="btn btn-outline-primary">Switch to Organizer View</a>

<hr>
<h4>Available Free Food Events</h4>

<p>Number of events: {{ events|length }}</p>

{% for event in events %}
  <div class="card my-3">
    <div class="card-body">
      <h5 class="card-title">{{ event.title }}</h5>
      <p class="card-text">{{ event.description }}</p>
      <p><strong>Location:</strong> {{ event.location }}</p>
      <p><strong>Pickup Time:</strong> 
        {{ event.pickup_time | datetimeformat("%I:%M %p") if event.pickup_time else "N/A" }}
      </p>      
      <p><strong>Posted By:</strong> {{ event.author_name or 'Unknown' }} ({{ event.author_email }})</p>
      <p><strong>Allergens:</strong> {{ event.allergies or "None" }}</p>
      <p><strong>Time Remaining:</strong> 
        <span class="countdown" data-created="{{ event.created_at }}" data-duration="{{ event.time_remaining }}"></span>
      </p>
    </div>
  </div>
{% else %}
  <p>No events available.</p>
{% endfor %}
{% endblock %}
